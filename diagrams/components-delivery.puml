@startuml
' Delivery Status - ACTUAL IMPLEMENTATION (Basic Status Only)
skinparam componentStyle rectangle

package "Clients" {
  [Customer App] <<component>>
  [Restaurant Panel] <<component>>
  [Admin Panel] <<component>>
}

package "Backend (Express)" {
  [Order Controller] <<component>>
}

database "MongoDB" {
  [orders collection] <<database>>
}

' Status update flows
[Restaurant Panel] --> [Order Controller] : POST /api/order/status
[Admin Panel] --> [Order Controller] : POST /api/order/status
[Customer App] --> [Order Controller] : POST /api/order/confirm-delivery

[Order Controller] --> [orders collection] : update status field

note right of [Order Controller]
  **Order Status Flow:**
  
  "Food Processing" (default after payment)
  ↓
  "Out for delivery" (restaurant/admin updates)
  ↓
  "Delivered" (customer confirms OR admin sets)
  
  Can also be "Cancelled" (admin/restaurant)
  
  **confirmDelivery**: Customer can confirm
  only if status is "Out for delivery"
  
  **updateStatus**: Restaurant/Admin can
  change to any status
  
  **cancelOrder**: Set to "Cancelled" with reason
end note

note left of MongoDB
  **NO real delivery features:**
  - No driver assignment
  - No GPS tracking
  - No route optimization
  - No driver database
  - No real-time location
  - No ETA calculation
  - No notifications
  
  Just basic status updates
end note

note bottom
  To implement real delivery:
  - Need driver accounts
  - GPS tracking system
  - Real-time updates (WebSockets)
  - Maps API integration
  - Push notifications
  - Driver mobile app
end note

actor Customer
actor Restaurant
actor Admin
Customer --> [Customer App]
Restaurant --> [Restaurant Panel]
Admin --> [Admin Panel]

@enduml
